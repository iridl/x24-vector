# Ethiopia
logo: Ethiopia_IRI_98x48.png
institution: NMA
map_center: [9., 40.]
zoom: 5
shapes_adm:
    - name: National
      color: black
      sql: select 0 as key, 'Ethiopia' as label,
          ST_AsBinary(ST_Simplify(ST_Union(the_geom), .01)) as the_geom
          from eth_regions_dd
      is_checked: True
    - name: Regions
      color: black
      sql: select gid as key, name_1 as label, ST_AsBinary(the_geom) as the_geom
                  from eth_regions_dd
      is_checked: True
    - name: Zones
      color: grey
      sql: select gid as key, (name_2 || ', ' || name_1)  as label, ST_AsBinary(the_geom) as the_geom
                from eth_zones_dd
      is_checked: True
    - name: Woredas
      color: grey
      sql: select gid as key, (name_3 || ', ' || name_2 || ', ' || name_1) as label, ST_AsBinary(the_geom) as the_geom
                  from eth_woredas_dd
      is_checked: False

# Daily ENACTS Zarr conversion
daily:
    nc_path: /Data/data23/ #top level directory path to find input data
    zarr_resolution: null #set to null for no regridding
    chunks: #consider changing chunk sizes if regridding 
        T: 578
        Y: 25
        X: 31
    zarr_path: /data/remic/mydatafiles/ #top level directory path to put output file
    vars:
        #var name in apps: 
        #   - input file path relative to nc_path
        #   - output file path relative to zarr_path (set to null if it is identical to input file path)
        #   - var name def in file
        precip: 
            - NMA_Ethiopia_v7/ALL_NEW/Rainfall/daily/
            - NMA_Ethiopia_v7/ALL_NEW/Rainfall/daily/rr_mrg_ALL/
            - precip
        tmax: 
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/daily/tmax/ 
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/daily/tmax/tmax_mrg_ALL/
            - temp
        tmin: 
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/daily/tmin/
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/daily/tmin/tmin_mrg_ALL/
            - temp

# Dekadal ENACTS Zarr conversion
dekadal:
    nc_path: /Data/data23/ #top level directory path to find input data
    zarr_resolution: null #set to null for no regridding
    chunks: #consider changing chunk sizes if regridding 
        T: 456
        Y: 18
        X: 20
    zarr_path: /data/remic/mydatafiles/ #top level directory path to put output file
    vars: 
        #var name in apps: 
        #    - input file path relative to nc_path
        #    - output file path relative to zarr_path (set to null if it is identical to input file path)
        #    - var name def in file
        precip: 
            - NMA_Ethiopia_v7/ALL_NEW/Rainfall/dekadal/
            - NMA_Ethiopia_v7/ALL_NEW/Rainfall/dekadal/rr_mrg_ALL/
            - precip
        tmax: 
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/dekadal/tmax/ 
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/dekadal/tmax/tmax_mrg_ALL/
            - temp
        tmin: 
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/dekadal/tmin/
            - NMA_Ethiopia_v7/ALL_NEW/Temperature/dekadal/tmin/tmin_mrg_ALL/
            - temp

# Climate Analysis -- Monthly
monthly:

    vars:
        Rainfall:
            max: 350
        Minimum Temperature:
            min: -5
            max: 40
        Maximum Temperature:
            min: -5
            max: 40

# Flexible Forecast
flex_fcst:
  
    # Forecast options
    forecast_path: /data/remic/mydatafiles/Ethiopia/FMAM
    y_transform: false
    start_regex: '[A-Z][a-z]{2}\d{4}'
    start_format_in: '%b%Y'
    start_format_out: '%b%Y'
    forecast_mu_file_pattern: NextGen_PRCPPRCP_CCAFCST_mu_SLtarget.tsv
    forecast_var_file_pattern: NextGen_PRCPPRCP_CCAFCST_var_SLtarget.tsv
    obs_file_pattern: obs_PRCP_SLtarget.tsv
    hcst_file_pattern: None
    variable: Precipitation

    # S,L, target dates options
    target_period_length: 4
    time_units: months
    leads: null
    targets: ["Feb-May"]

# Onset
onset:

    # Onset_and_Cessation
    default_search_month: Jun
    default_running_days: 5
    default_min_rainy_days: 3
    ison_cess_date_hist: True
    map_text:
        length_mean:
            map_max: 180
        length_stddev:
            map_max: 40
        monit:
            menu_label: Has germinating rain occured?
            description: The map shows the result of the germinating rain date search
                (i.e. near-real time thus without checking of follow-up dry spells)
                from the most recent Early Start to now
                (or the last day with available rainfall data).
                Dates are expressed in days since an Early Start date.
        mean:
            menu_label: When to prepare for planting?
            description: The map shows the average onset date over all years of available data.
                Dates are expressed in days since an Early Start date.
        stddev:
            menu_label: How uncertain is the planting date?
            description: The map shows the standard deviation from the average onset date.
                over all years of available data.
                Dates are expressed in days since an Early Start date.
        pe:
            menu_label: How risky to plant...
            description: The map shows the probability of the onset date to be past a certain date,
                through all the years of available data.
                Dates are expressed in days since an Early Start date.

# Crop Suitability
crop_suit:

    # App
    core_path: /crop_suitability_maproom

    app_title: Crop Suitability Mappron
    crop_suit_title: Crop Suitability Analysis Maproom
    default_search_month: Jun
    default_running_days: 5
    default_min_rainy_days: 3
    ison_cess_date_hist: True
    map_text:
        suitability_map:
            menu_label: Crop suitability 
            description: The map shows the result of spatial overlay analysis using the user inputs for a specific crop.
            units: integer index
            data_var: suit
        precip_map:
            menu_label: Precipitation
            description: Coverage of the region for precipitationd data.
            units: mm
            data_var: precip
        tmax_map:
            menu_label: Maximum temperature
            description: Coverage for the region for maximum temperature data.
            units: C
            data_var: temp
        tmin_map:
            menu_label: Minimum temperature
            description: Coverage for the region for minimum temperature data.
            units: C
            data_var: temp
    param_defaults:
        target_year: 2018
        target_season: MAM
        lower_wet_thresh: 500
        upper_wet_thresh: 700
        min_temp: 10
        max_temp: 25
        temp_range: 15
        season_length: 75
        min_wet_days: 60
        wet_day_def: 10
